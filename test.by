#include("net")

echo("\n" .. string.rep("-", 45))
echo("   BYTE LANGUAGE: FULL 10-METHOD NETWORK TEST")
echo(string.rep("-", 45) .. "\n")

-- ۱. آی‌پی عمومی (Public IP)
echo("[1] Public IP Check:")
echo("    Your Internet IP: " .. (net.public_ip() or "Error"))

-- ۲. آی‌پی محلی (Local IP - Pure C)
echo("\n[2] Local IP Check (C-Socket):")
echo("    Your Device IP: " .. (net.local_ip() or "Error"))

-- ۳. تبدیل نام به آی‌پی (DNS Lookup)
echo("\n[3] DNS Lookup Test:")
local target = "google.com"
echo("    Target: " .. target .. " -> IP: " .. (net.dns(target) or "Error"))

-- ۴. اسکن پورت (Port Scan)
echo("\n[4] Port Security Scan:")
if net.scan(target, 80) then
    echo("    Status: Port 80 is OPEN on " .. target)
else
    echo("    Status: Port 80 is CLOSED")
end

-- ۵. گرفتن بنر سرویس (Banner Grabbing)
echo("\n[5] Service Banner Discovery:")
local banner = net.banner(target, 80)
echo("    Raw Banner: " .. (banner or "No banner detected"))

-- ۶. موقعیت جغرافیایی (Geo-IP JSON)
echo("\n[6] Geo-Location Analysis (JSON):")
echo("    Data: " .. net.geoip("8.8.8.8"))

-- ۷. اطلاعات مالکیت (Whois)
echo("\n[7] Whois/OSINT Information:")
echo(net.whois(target))

-- ۸. وضعیت آنلاین بودن وب‌سایت (HTTP Status)
echo("\n[8] Website Health Check:")
echo("    Status Code for GitHub: " .. net.status("https://github.com"))

-- ۹. اتصالات فعال سیستم (Active Connections)
echo("\n[9] System Active Connections:")
echo(net.active())

-- ۱۰. دانلودر فایل (File Downloader)
echo("\n[10] Network Download Test:")
echo("    Downloading robots.txt...")
if net.download("https://www.google.com/robots.txt", "byte_result.txt") then
    echo("    Result: SUCCESS! (Check 'byte_result.txt')")
else
    echo("    Result: FAILED!")
end

echo("\n" .. string.rep("-", 45))
echo("      SUCCESS: ALL 10 METHODS EXECUTED")
echo(string.rep("-", 45) .. "\n")
